<!DOCTYPE html>
<html>
<head>
    <title>Gridley AFL Assistant</title>
    <style>
        body { font-family: Arial; background:#f4f4f4; padding:20px; }
        table { border-collapse: collapse; width:100%; background:white; }
        th, td { border:1px solid #ddd; padding:6px; text-align:center; }
        th { background:#222; color:white; }
        tr:nth-child(even) { background:#f2f2f2; }
        .box { background:white; padding:15px; margin-bottom:20px; }
        label { margin-right:15px; }
        input[type="number"] { width:80px; }
    </style>
</head>
<body>

<h1>üèâ Gridley AFL Assistant</h1>

<div class="box">
<form method="get">

<strong>Teams</strong><br>

Team 1:
<select name="team1">
    <option value="">Any</option>
    {% for t in teams %}
        <option value="{{ t }}" {% if filters.team1 == t %}selected{% endif %}>{{ t }}</option>
    {% endfor %}
</select>

Team 2:
<select name="team2">
    <option value="">Any</option>
    {% for t in teams %}
        <option value="{{ t }}" {% if filters.team2 == t %}selected{% endif %}>{{ t }}</option>
    {% endfor %}
</select>

<br><br>

<strong>Teammates</strong><br>

Teammates of:
<input list="playerlist" name="teammate_of" style="width:420px;"
       value="{{ filters.teammate_of or '' }}"
       placeholder="Start typing a player name...">

<datalist id="playerlist">
{% for p in player_options %}
    <option value="{{ p['player_id'] }}">{{ p['name'] }}</option>
{% endfor %}
</datalist>

<br><br>

<strong>Career</strong><br>

Min Games:
<input type="number" name="min_games" value="{{ filters.min_games or '' }}">

Max Games:
<input type="number" name="max_games" value="{{ filters.max_games or '' }}">

Min Goals (All Time):
<input type="number" name="min_goals" value="{{ filters.min_goals or '' }}">

Max Goals (All Time):
<input type="number" name="max_goals" value="{{ filters.max_goals or '' }}">

<br><br>

<strong>Height (cm)</strong><br>

Min Height:
<input type="number" name="min_height" value="{{ filters.min_height or '' }}">

Max Height:
<input type="number" name="max_height" value="{{ filters.max_height or '' }}">

<br><br>

<strong>Single Game Peaks</strong><br>

Min Goals (Game):
<input type="number" name="min_max_goals_game" value="{{ filters.min_max_goals_game or '' }}">

<br><br>


<strong>Career Years</strong><br>

Debuted After:
<input type="number" name="min_first_year" value="{{ filters.min_first_year or '' }}">

Played After:
<input type="number" name="min_last_year" value="{{ filters.min_last_year or '' }}">

<br><br>


<strong>Brownlow</strong><br>

Min Wins:
<input type="number" name="min_wins" value="{{ filters.min_wins or '' }}">

Min Votes:
<input type="number" name="min_votes" value="{{ filters.min_votes or '' }}">

<br><br>

<strong>Sort</strong><br>

<select name="sort_by">
    <option value="career_games">Career Games</option>
    <option value="career_goals">Career Goals</option>
	<option value="max_goals_game">Max Goals (Game)</option>
    <option value="brownlow_votes">Brownlow Votes</option>
    <option value="brownlow_wins">Brownlow Wins</option>
    <option value="gf_wins">GF Wins</option>
	<option value="first_year">First Year</option>
	<option value="last_year">Last Year</option>

</select>

<select name="sort_order">
    <option value="DESC">Descending</option>
    <option value="ASC">Ascending</option>
</select>

<br><br>

<strong>Display Columns</strong><br>

<label><input type="checkbox" name="show_max_goals" {% if visible.max_goals %}checked{% endif %}> Max Goals (Game)</label>
<label><input type="checkbox" name="show_max_disposals" {% if visible.max_disposals %}checked{% endif %}> Max Disposals (Game)</label>
<label><input type="checkbox" name="show_max_kicks" {% if visible.max_kicks %}checked{% endif %}> Max Kicks (Game)</label>
<label><input type="checkbox" name="show_wins" {% if visible.brownlow_wins %}checked{% endif %}> Brownlow Wins</label>
<label><input type="checkbox" name="show_votes" {% if visible.brownlow_votes %}checked{% endif %}> Brownlow Votes</label>
<label><input type="checkbox" name="show_gf_record" {% if visible.gf_record %}checked{% endif %}> GF Record (W-D-L)</label>
<label><input type="checkbox" name="show_height" {% if visible.height %}checked{% endif %}> Height</label>
<label><input type="checkbox" name="show_years" {% if visible.years %}checked{% endif %}>Years Played</label>

<br><br>

<button type="submit">Search</button>

</form>
</div>

<table>
<tr>
    <th>Name</th>
    <th>Teams</th>
    <th>Games</th>
    <th>Goals</th>

    {% if visible.max_goals %}<th>Max G (Game)</th>{% endif %}
    {% if visible.max_disposals %}<th>Max D (Game)</th>{% endif %}
    {% if visible.max_kicks %}<th>Max K (Game)</th>{% endif %}
    {% if visible.brownlow_wins %}<th>Brownlow Wins</th>{% endif %}
    {% if visible.brownlow_votes %}<th>Brownlow Votes</th>{% endif %}
    {% if visible.gf_record %}<th>GF Record</th>{% endif %}
	{% if visible.height %}<th>Height (cm)</th>{% endif %}
	{% if visible.years %}<th>Years</th>{% endif %}


    <th>Career</th>
</tr>

{% for p in players %}
<tr>
    <td><a href="{{ p['player_id'] }}" target="_blank">{{ p['name'] }}</a></td>
    <td>{{ p['teams'] }}</td>
    <td>{{ p['career_games'] }}</td>
    <td>{{ p['career_goals'] }}</td>

    {% if visible.max_goals %}<td>{{ p['max_goals_game'] }}</td>{% endif %}
    {% if visible.max_disposals %}<td>{{ p['max_disposals_game'] }}</td>{% endif %}
    {% if visible.max_kicks %}<td>{{ p['max_kicks_game'] }}</td>{% endif %}
    {% if visible.brownlow_wins %}<td>{{ p['brownlow_wins'] }}</td>{% endif %}
    {% if visible.brownlow_votes %}<td>{{ p['brownlow_votes'] }}</td>{% endif %}
    {% if visible.gf_record %}<td>{{ p['gf_wins'] or 0 }}-{{ p['gf_draws'] or 0 }}-{{ p['gf_losses'] or 0 }}</td>{% endif %}
	{% if visible.height %}<td>{{ p['height'] or '' }}</td>{% endif %}
	{% if visible.years %}<td>{{ p['first_year'] }} - {{ p['last_year'] }}</td>{% endif %}



    <td>{{ p['first_year'] }} - {{ p['last_year'] }}</td>
</tr>
{% endfor %}

</table>

</body>
</html>
